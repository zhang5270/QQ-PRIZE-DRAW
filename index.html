<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025å¹´åº¦æ¸¸æˆæŠ½å¥–</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
            --accent: #ff6b6b;
            --success: #1dd1a1;
            --dark: #1a1a2e;
            --darker: #0f0f1e;
            --light: #f8f9fa;
            --gold: #ffd700;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            min-height: 100vh;
            color: var(--light);
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* ç²’å­èƒŒæ™¯æ•ˆæœ */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }
        
        /* å¤´éƒ¨æ ·å¼ */
        .header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, rgba(106, 17, 203, 0.2) 0%, rgba(37, 117, 252, 0.2) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--secondary), var(--accent));
        }
        
        .game-icon {
            font-size: 4rem;
            color: var(--gold);
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(to right, var(--gold), #ffed4e);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(106, 17, 203, 0.3);
        }
        
        /* å¥–å“å±•ç¤ºåŒºåŸŸ */
        .prize-display {
            grid-column: 1 / -1;
            text-align: center;
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.9) 0%, rgba(22, 33, 62, 0.9) 100%);
            position: relative;
            overflow: hidden;
        }
        
        .prize-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(106,17,203,0.1)"/></svg>');
            background-size: cover;
        }
        
        .prize-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            color: var(--gold);
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        .prize-description {
            font-size: 1.3rem;
            line-height: 1.8;
            color: #e0e0ff;
            margin-bottom: 30px;
        }
        
        .game-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .game-tag {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.3);
        }
        
        .game-tag:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(106, 17, 203, 0.4);
        }
        
        /* ç»Ÿè®¡å¡ç‰‡ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .stat-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
        }
        
        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* å€’è®¡æ—¶ */
        .countdown-container {
            text-align: center;
            margin: 40px 0;
        }
        
        .countdown-title {
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .countdown-timer {
            font-family: 'Orbitron', monospace;
            font-size: 4rem;
            font-weight: 700;
            color: var(--success);
            text-shadow: 0 0 20px rgba(29, 209, 161, 0.5);
            margin: 20px 0;
        }
        
        /* å‚ä¸è¡¨å• */
        .join-form-container {
            max-width: 600px;
            margin: 40px auto;
        }
        
        .join-form {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            border: 2px solid rgba(106, 17, 203, 0.3);
        }
        
        .join-title {
            text-align: center;
            font-size: 1.8rem;
            color: var(--gold);
            margin-bottom: 30px;
        }
        
        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .name-input {
            flex: 1;
            padding: 18px 25px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            color: white;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .name-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(106, 17, 203, 0.3);
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 18px 35px;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 10px 20px rgba(106, 17, 203, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(106, 17, 203, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #10ac84);
            color: white;
            box-shadow: 0 10px 20px rgba(29, 209, 161, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }
        
        .btn-block {
            width: 100%;
        }
        
        /* ä¸­å¥–åå• */
        .winners-container {
            margin-top: 50px;
            text-align: center;
        }
        
        .winners-title {
            font-size: 2rem;
            color: var(--gold);
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        
        .winner-card {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 237, 78, 0.05));
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .winner-card::before {
            content: 'ğŸ†';
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 2rem;
            opacity: 0.3;
        }
        
        .winner-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            color: var(--gold);
            margin-bottom: 10px;
        }
        
        .winner-time {
            color: #aaa;
            font-size: 1rem;
        }
        
        /* çŠ¶æ€æ¶ˆæ¯ */
        .status-message {
            padding: 15px 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: 500;
            animation: slideIn 0.3s ease;
        }
        
        .status-success {
            background: rgba(29, 209, 161, 0.2);
            color: var(--success);
            border: 1px solid rgba(29, 209, 161, 0.3);
        }
        
        .status-error {
            background: rgba(255, 107, 107, 0.2);
            color: var(--accent);
            border: 1px solid rgba(255, 107, 107, 0.3);
        }
        
        .status-info {
            background: rgba(106, 17, 203, 0.2);
            color: #a78bfa;
            border: 1px solid rgba(106, 17, 203, 0.3);
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ç®¡ç†å‘˜å…¥å£ */
        .admin-entry {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .admin-btn {
            background: rgba(255, 107, 107, 0.9);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 25px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.3);
            transition: all 0.3s ease;
        }
        
        .admin-btn:hover {
            background: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }
        
        /* ç®¡ç†å‘˜ç•Œé¢ */
        .admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 15, 30, 0.95);
            z-index: 2000;
            display: none;
            overflow-y: auto;
        }
        
        .admin-container {
            max-width: 1000px;
            margin: 50px auto;
            padding: 30px;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--primary);
        }
        
        .admin-close {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .admin-tab {
            background: rgba(255, 255, 255, 0.05);
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            color: #aaa;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .admin-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.3);
        }
        
        .admin-content {
            display: none;
        }
        
        .admin-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* è¡¨å•å…ƒç´  */
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 10px;
            color: var(--gold);
            font-weight: 600;
        }
        
        .form-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* å‚ä¸è€…åˆ—è¡¨ */
        .participants-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .participant-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }
        
        .participant-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            .prize-title { font-size: 2rem; }
            .prize-description { font-size: 1.1rem; }
            .countdown-timer { font-size: 3rem; }
            .stat-value { font-size: 2rem; }
            .stats-grid { grid-template-columns: 1fr; }
            .game-tag { font-size: 0.9rem; padding: 10px 20px; }
            .input-group { flex-direction: column; }
            .btn { width: 100%; }
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loader {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* åŒæ­¥çŠ¶æ€ */
        .sync-status {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .sync-success { color: var(--success); }
        .sync-error { color: var(--accent); }
        
        /* æ»šåŠ¨æ¡ç¾åŒ– */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--primary), var(--secondary));
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(var(--secondary), var(--primary));
        }
    </style>
</head>
<body>
    <!-- ç²’å­èƒŒæ™¯ -->
    <div id="particles-js"></div>
    
    <!-- ç®¡ç†å‘˜å…¥å£ -->
    <div class="admin-entry">
        <button class="admin-btn" id="adminBtn">
            <i class="fas fa-cog"></i> ç®¡ç†å‘˜
        </button>
    </div>
    
    <!-- åŒæ­¥çŠ¶æ€ -->
    <div class="sync-status" id="syncStatus">
        <span class="loader" id="syncLoader"></span>
        <span id="syncText">æ­£åœ¨è¿æ¥äº‘ç«¯...</span>
    </div>
    
    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <header class="header">
            <div class="game-icon">
                <i class="fas fa-gamepad"></i>
            </div>
            <h1>2025å¹´åº¦æ¸¸æˆæŠ½å¥–</h1>
            <p class="subtitle">äº‘ç«¯åŒæ­¥ â€¢ å…¬å¹³é€æ˜ â€¢ å®æ—¶å‚ä¸</p>
        </header>
        
        <!-- å¥–å“å±•ç¤º -->
        <div class="card prize-display">
            <div class="prize-title" id="prizeTitle">2025å¹´åº¦æ¸¸æˆæŠ½å¥–</div>
            <div class="prize-description" id="prizeDescription">
                ä¸­å¥–åè¯·è”ç³»ä»™å­é¹¿é¢†å–æœ€é«˜ä»·å€¼160å…ƒçš„å•æœºæ¸¸æˆï¼
            </div>
            <div class="game-list">
                <span class="game-tag">å¤©å›½æ‹¯æ•‘2</span>
                <span class="game-tag">åŒå½±å¥‡é•œ</span>
                <span class="game-tag">33å·è¿œå¾é˜Ÿ</span>
                <span class="game-tag">æ˜Ÿæµ·å¥‡èˆª</span>
                <span class="game-tag">æ—¶å…‰æ—…è€…</span>
            </div>
        </div>
        
        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="participantCount">0</div>
                <div class="stat-label">å·²å‚ä¸äººæ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="winnerCount">1</div>
                <div class="stat-label">ä¸­å¥–åé¢</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="timeLeft">1å°æ—¶</div>
                <div class="stat-label">å¼€å¥–å€’è®¡æ—¶</div>
            </div>
        </div>
        
        <!-- å€’è®¡æ—¶ -->
        <div class="countdown-container">
            <div class="countdown-title">å¼€å¥–å€’è®¡æ—¶</div>
            <div class="countdown-timer" id="countdownTimer">01:00:00</div>
        </div>
        
        <!-- å‚ä¸è¡¨å• -->
        <div class="join-form-container">
            <div class="card join-form">
                <div class="join-title">ç«‹å³å‚ä¸æŠ½å¥–</div>
                <div class="input-group">
                    <input type="text" class="name-input" id="participantName" placeholder="è¾“å…¥æ‚¨çš„æ˜µç§°" maxlength="20">
                    <button class="btn btn-primary" id="joinBtn">
                        <i class="fas fa-paper-plane"></i> ç«‹å³å‚ä¸
                    </button>
                </div>
                <div id="joinStatus"></div>
            </div>
        </div>
        
        <!-- ä¸­å¥–åå• -->
        <div class="winners-container" id="winnersSection">
            <div class="winners-title" id="winnersTitle">ä¸­å¥–åå•</div>
            <div id="winnersList">
                <!-- ä¸­å¥–è€…å°†åŠ¨æ€æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
        </div>
    </div>
    
    <!-- ç®¡ç†å‘˜ç•Œé¢ -->
    <div class="admin-overlay" id="adminOverlay">
        <div class="admin-container">
            <div class="admin-header">
                <h2 style="color: var(--gold); font-size: 2rem;">ğŸ® ç®¡ç†å‘˜æ§åˆ¶å°</h2>
                <button class="admin-close" id="adminClose">
                    <i class="fas fa-times"></i> å…³é—­
                </button>
            </div>
            
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="settings">æŠ½å¥–è®¾ç½®</button>
                <button class="admin-tab" data-tab="participants">å‚ä¸è€…ç®¡ç†</button>
                <button class="admin-tab" data-tab="results">å¼€å¥–ç»“æœ</button>
                <button class="admin-tab" data-tab="config">äº‘ç«¯é…ç½®</button>
            </div>
            
            <!-- æŠ½å¥–è®¾ç½® -->
            <div class="admin-content active" id="settingsTab">
                <div class="card" style="margin-bottom: 20px;">
                    <h3 style="color: var(--gold); margin-bottom: 20px;">æŠ½å¥–è®¾ç½®</h3>
                    
                    <div class="form-group">
                        <label class="form-label">å¥–å“åç§°</label>
                        <input type="text" class="form-input" id="adminPrizeName" value="2025å¹´åº¦æ¸¸æˆæŠ½å¥–">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">å¥–å“æè¿°</label>
                        <textarea class="form-input" id="adminPrizeDescription" rows="4">ä¸­å¥–åè¯·è”ç³»ä»™å­é¹¿é¢†å–æœ€é«˜ä»·å€¼160å…ƒçš„å•æœºæ¸¸æˆï¼å¦‚ï¼šå¤©å›½æ‹¯æ•‘2ã€åŒå½±å¥‡é•œã€33å·è¿œå¾é˜Ÿç­‰</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ä¸­å¥–äººæ•°</label>
                        <input type="number" class="form-input" id="adminWinnerCount" min="1" max="10" value="1">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">å¼€å¥–å€’è®¡æ—¶ï¼ˆå°æ—¶ï¼‰</label>
                        <input type="number" class="form-input" id="adminTimerHours" min="0" max="240" step="0.5" value="1">
                        <small style="color: #aaa; display: block; margin-top: 5px;">0è¡¨ç¤ºæ‰‹åŠ¨å¼€å¥–</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">æœ€å¤§å‚ä¸äººæ•°ï¼ˆ0ä¸ºä¸é™ï¼‰</label>
                        <input type="number" class="form-input" id="adminMaxParticipants" min="0" max="1000" value="10">
                    </div>
                    
                    <button class="btn btn-primary btn-block" id="saveSettingsBtn">
                        <i class="fas fa-save"></i> ä¿å­˜è®¾ç½®
                    </button>
                </div>
                
                <div class="card">
                    <h3 style="color: var(--gold); margin-bottom: 20px;">æŠ½å¥–æ§åˆ¶</h3>
                    
                    <div class="countdown-timer" id="adminCountdown">01:00:00</div>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 1.2rem; color: var(--gold); margin-bottom: 10px;">
                            çŠ¶æ€: <span id="drawStatus">æœªå¼€å§‹</span>
                        </div>
                        <div style="color: #aaa;">
                            å‚ä¸è€…: <span id="adminParticipantCount">0</span> äºº | 
                            ä¸­å¥–åé¢: <span id="adminWinnerCountDisplay">1</span> äºº
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <button class="btn btn-success" id="startDrawBtn">
                            <i class="fas fa-play"></i> å¼€å§‹æŠ½å¥–
                        </button>
                        <button class="btn btn-primary" id="drawNowBtn">
                            <i class="fas fa-bolt"></i> ç«‹å³å¼€å¥–
                        </button>
                        <button class="btn btn-danger" id="resetDrawBtn">
                            <i class="fas fa-redo"></i> é‡ç½®æŠ½å¥–
                        </button>
                        <button class="btn" id="announceWinnersBtn" style="background: linear-gradient(135deg, var(--gold), #ffed4e); color: #333;">
                            <i class="fas fa-bullhorn"></i> å…¬å¸ƒç»“æœ
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- å‚ä¸è€…ç®¡ç† -->
            <div class="admin-content" id="participantsTab">
                <div class="card">
                    <h3 style="color: var(--gold); margin-bottom: 20px;">å‚ä¸è€…åˆ—è¡¨ (<span id="participantsCount">0</span>äºº)</h3>
                    
                    <div class="participants-list" id="participantsList">
                        <div style="text-align: center; padding: 40px; color: #aaa;">
                            <i class="fas fa-users" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
                            <p>æš‚æ— å‚ä¸è€…</p>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button class="btn btn-danger" id="clearParticipantsBtn">
                            <i class="fas fa-trash"></i> æ¸…ç©ºå‚ä¸è€…
                        </button>
                        <button class="btn" id="exportParticipantsBtn" style="background: linear-gradient(135deg, #1dd1a1, #10ac84);">
                            <i class="fas fa-download"></i> å¯¼å‡ºåå•
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- å¼€å¥–ç»“æœ -->
            <div class="admin-content" id="resultsTab">
                <div class="card">
                    <h3 style="color: var(--gold); margin-bottom: 20px;">ä¸­å¥–ç»“æœ</h3>
                    
                    <div id="adminWinnersList">
                        <div style="text-align: center; padding: 40px; color: #aaa;">
                            <i class="fas fa-trophy" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
                            <p>å°šæœªå¼€å¥–</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- äº‘ç«¯é…ç½® -->
            <div class="admin-content" id="configTab">
                <div class="card">
                    <h3 style="color: var(--gold); margin-bottom: 20px;">äº‘ç«¯é…ç½®</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Gist ID</label>
                        <input type="text" class="form-input" id="gistIdInput" placeholder="è¯·è¾“å…¥32ä½Gist ID">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">GitHub Token</label>
                        <input type="password" class="form-input" id="githubTokenInput" placeholder="è¯·è¾“å…¥GitHub Token">
                        <small style="color: #aaa; display: block; margin-top: 5px;">
                            éœ€è¦gistæƒé™ï¼Œ<a href="https://github.com/settings/tokens" target="_blank" style="color: var(--primary);">å¦‚ä½•åˆ›å»ºï¼Ÿ</a>
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">åŒæ­¥é—´éš”ï¼ˆç§’ï¼‰</label>
                        <input type="number" class="form-input" id="syncIntervalInput" min="5" max="300" value="10">
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 30px;">
                        <button class="btn btn-primary" id="saveConfigBtn">
                            <i class="fas fa-save"></i> ä¿å­˜é…ç½®
                        </button>
                        <button class="btn" id="testConnectionBtn" style="background: linear-gradient(135deg, #1dd1a1, #10ac84);">
                            <i class="fas fa-plug"></i> æµ‹è¯•è¿æ¥
                        </button>
                    </div>
                    
                    <div style="margin-top: 30px; padding: 20px; background: rgba(106, 17, 203, 0.1); border-radius: 10px;">
                        <h4 style="color: var(--gold); margin-bottom: 15px;">é…ç½®è¯´æ˜</h4>
                        <ol style="color: #aaa; margin-left: 20px;">
                            <li>åˆ›å»ºGitHub Tokenï¼ˆéœ€è¦gistæƒé™ï¼‰</li>
                            <li>åˆ›å»ºGistè·å–Gist ID</li>
                            <li>å¡«å…¥Gist IDå’ŒToken</li>
                            <li>ä¿å­˜é…ç½®ï¼Œç³»ç»Ÿå¼€å§‹åŒæ­¥</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ç²’å­æ•ˆæœè„šæœ¬ -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <script>
        // ç²’å­èƒŒæ™¯
        particlesJS("particles-js", {
            particles: {
                number: { value: 80, density: { enable: true, value_area: 800 } },
                color: { value: "#6a11cb" },
                shape: { type: "circle" },
                opacity: { value: 0.5, random: true },
                size: { value: 3, random: true },
                line_linked: {
                    enable: true,
                    distance: 150,
                    color: "#6a11cb",
                    opacity: 0.2,
                    width: 1
                },
                move: {
                    enable: true,
                    speed: 2,
                    direction: "none",
                    random: true,
                    straight: false,
                    out_mode: "out",
                    bounce: false
                }
            },
            interactivity: {
                detect_on: "canvas",
                events: {
                    onhover: { enable: true, mode: "repulse" },
                    onclick: { enable: true, mode: "push" }
                }
            }
        });
        
        // æŠ½å¥–ç®¡ç†å™¨
        class GameLotteryManager {
            constructor() {
                this.config = {
                    gistId: "",
                    githubToken: "",
                    syncInterval: 10,
                    lastSync: 0
                };
                this.data = null;
                this.syncInterval = null;
                this.countdownInterval = null;
                this.loadConfig();
            }
            
            loadConfig() {
                const saved = localStorage.getItem('gameLotteryConfig');
                if (saved) {
                    try {
                        this.config = {...this.config, ...JSON.parse(saved)};
                    } catch (e) {
                        console.error('åŠ è½½é…ç½®å¤±è´¥', e);
                    }
                }
            }
            
            saveConfig() {
                localStorage.setItem('gameLotteryConfig', JSON.stringify(this.config));
            }
            
            async loadData() {
                if (!this.config.gistId || !this.config.githubToken) {
                    this.updateSyncStatus('æœªé…ç½®äº‘ç«¯å­˜å‚¨', 'error');
                    return;
                }
                
                this.showLoader();
                
                try {
                    const response = await fetch(`https://api.github.com/gists/${this.config.gistId}`, {
                        headers: {
                            'Authorization': `token ${this.config.githubToken}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    const gistData = await response.json();
                    const fileContent = gistData.files['lottery_data.json'].content;
                    this.data = JSON.parse(fileContent);
                    
                    this.config.lastSync = Date.now();
                    this.saveConfig();
                    
                    this.updateUI();
                    this.updateSyncStatus('å·²åŒæ­¥ ' + new Date().toLocaleTimeString('zh-CN'), 'success');
                    
                    this.startAutoSync();
                    
                } catch (error) {
                    console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                    this.updateSyncStatus('åŒæ­¥å¤±è´¥: ' + error.message, 'error');
                } finally {
                    this.hideLoader();
                }
            }
            
            async saveData() {
                if (!this.data || !this.config.gistId || !this.config.githubToken) {
                    return false;
                }
                
                try {
                    this.data.lastUpdated = new Date().toISOString();
                    
                    const response = await fetch(`https://api.github.com/gists/${this.config.gistId}`, {
                        method: 'PATCH',
                        headers: {
                            'Authorization': `token ${this.config.githubToken}`,
                            'Content-Type': 'application/json',
                            'Accept': 'application/vnd.github.v3+json'
                        },
                        body: JSON.stringify({
                            description: "æ¸¸æˆæŠ½å¥–ç³»ç»Ÿ - æœ€åæ›´æ–°: " + new Date().toLocaleString('zh-CN'),
                            files: {
                                "lottery_data.json": {
                                    content: JSON.stringify(this.data, null, 2)
                                }
                            }
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    this.config.lastSync = Date.now();
                    this.saveConfig();
                    
                    this.updateSyncStatus('å·²ä¿å­˜ ' + new Date().toLocaleTimeString('zh-CN'), 'success');
                    return true;
                    
                } catch (error) {
                    console.error('ä¿å­˜æ•°æ®å¤±è´¥:', error);
                    this.updateSyncStatus('ä¿å­˜å¤±è´¥', 'error');
                    return false;
                }
            }
            
            startAutoSync() {
                if (this.syncInterval) clearInterval(this.syncInterval);
                
                this.syncInterval = setInterval(() => {
                    this.loadData();
                }, this.config.syncInterval * 1000);
            }
            
            updateUI() {
                if (!this.data) return;
                
                // æ›´æ–°å‚ä¸è€…è§†å›¾
                document.getElementById('prizeTitle').textContent = this.data.prizeName;
                document.getElementById('prizeDescription').textContent = this.data.prizeDescription;
                document.getElementById('participantCount').textContent = this.data.participants.length;
                document.getElementById('winnerCount').textContent = this.data.winnerCount;
                
                this.updateCountdown();
                this.updateWinnersDisplay();
                
                // æ›´æ–°ç®¡ç†å‘˜è§†å›¾
                if (document.getElementById('adminOverlay').style.display === 'block') {
                    this.updateAdminUI();
                }
            }
            
            updateCountdown() {
                const timerElement = document.getElementById('countdownTimer');
                const timeLeftElement = document.getElementById('timeLeft');
                const adminTimerElement = document.getElementById('adminCountdown');
                
                if (!this.data.drawStarted || !this.data.drawTime) {
                    timerElement.textContent = '00:00:00';
                    timeLeftElement.textContent = 'å¾…å¼€å§‹';
                    if (adminTimerElement) adminTimerElement.textContent = '00:00:00';
                    return;
                }
                
                const now = new Date().getTime();
                const drawTime = this.data.drawTime;
                const timeLeft = drawTime - now;
                
                if (timeLeft <= 0) {
                    timerElement.textContent = '00:00:00';
                    timeLeftElement.textContent = 'å·²å¼€å¥–';
                    if (adminTimerElement) adminTimerElement.textContent = '00:00:00';
                    
                    if (!this.data.winners || this.data.winners.length === 0) {
                        this.performDraw();
                    }
                    return;
                }
                
                const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                
                const timeStr = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                timerElement.textContent = timeStr;
                timeLeftElement.textContent = `${hours}å°æ—¶${minutes}åˆ†é’Ÿ`;
                if (adminTimerElement) adminTimerElement.textContent = timeStr;
                
                if (this.data.drawStarted && this.data.drawTime && !this.countdownInterval) {
                    this.startCountdown();
                }
            }
            
            startCountdown() {
                if (this.countdownInterval) clearInterval(this.countdownInterval);
                
                this.countdownInterval = setInterval(() => {
                    this.updateCountdown();
                    
                    if (this.data.drawStarted && this.data.drawTime) {
                        const now = new Date().getTime();
                        if (now >= this.data.drawTime) {
                            this.performDraw();
                            clearInterval(this.countdownInterval);
                        }
                    }
                }, 1000);
            }
            
            async addParticipant(name) {
                if (!name || name.trim() === '') {
                    return {success: false, message: 'è¯·è¾“å…¥æ˜µç§°'};
                }
                
                name = name.trim();
                
                // ç”Ÿæˆå”¯ä¸€ID
                const participantId = `${name}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                
                // æ£€æŸ¥æ˜¯å¦å·²å‚ä¸
                const alreadyParticipated = this.data.participants.some(p => 
                    p.name.toLowerCase() === name.toLowerCase()
                );
                
                if (alreadyParticipated) {
                    return {success: false, message: 'æ‚¨å·²ç»å‚ä¸è¿‡æŠ½å¥–äº†'};
                }
                
                // æ£€æŸ¥äººæ•°é™åˆ¶
                if (this.data.maxParticipants > 0 && this.data.participants.length >= this.data.maxParticipants) {
                    return {success: false, message: 'å‚ä¸äººæ•°å·²è¾¾ä¸Šé™'};
                }
                
                // æ£€æŸ¥æŠ½å¥–çŠ¶æ€
                if (this.data.drawStarted) {
                    return {success: false, message: 'æŠ½å¥–å·²å¼€å§‹ï¼Œæ— æ³•å‚ä¸'};
                }
                
                // æ·»åŠ å‚ä¸è€…
                this.data.participants.push({
                    id: participantId,
                    name: name,
                    time: new Date().toLocaleString('zh-CN')
                });
                
                const saved = await this.saveData();
                if (!saved) {
                    return {success: false, message: 'ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•'};
                }
                
                return {success: true, message: `æˆåŠŸå‚ä¸ï¼æ‚¨æ˜¯ç¬¬${this.data.participants.length}ä½å‚ä¸è€…`};
            }
            
            updateWinnersDisplay() {
                const winnersListElement = document.getElementById('winnersList');
                const adminWinnersListElement = document.getElementById('adminWinnersList');
                
                if (!this.data.winnersAnnounced || !this.data.winners || this.data.winners.length === 0) {
                    winnersListElement.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #aaa;">
                            <i class="fas fa-clock" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
                            <p>ç­‰å¾…å¼€å¥–ç»“æœå…¬å¸ƒ...</p>
                        </div>
                    `;
                    
                    if (adminWinnersListElement) {
                        adminWinnersListElement.innerHTML = `
                            <div style="text-align: center; padding: 40px; color: #aaa;">
                                <i class="fas fa-clock" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
                                <p>å°šæœªå¼€å¥–</p>
                            </div>
                        `;
                    }
                    return;
                }
                
                // æ›´æ–°å‚ä¸è€…è§†å›¾
                let winnersHTML = '';
                this.data.winners.forEach((winner, index) => {
                    winnersHTML += `
                        <div class="winner-card">
                            <div class="winner-name">${winner.name}</div>
                            <div class="winner-time">${winner.time}</div>
                        </div>
                    `;
                });
                winnersListElement.innerHTML = winnersHTML;
                
                // æ›´æ–°ç®¡ç†å‘˜è§†å›¾
                if (adminWinnersListElement) {
                    let adminWinnersHTML = '';
                    this.data.winners.forEach((winner, index) => {
                        adminWinnersHTML += `
                            <div style="background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,237,78,0.05)); padding: 20px; border-radius: 10px; margin: 10px 0; border-left: 4px solid var(--gold);">
                                <div style="font-size: 1.5rem; color: var(--gold); font-weight: 600;">ğŸ† ${winner.name}</div>
                                <div style="color: #aaa; margin-top: 5px;">${winner.time}</div>
                            </div>
                        `;
                    });
                    adminWinnersListElement.innerHTML = adminWinnersHTML;
                }
            }
            
            updateAdminUI() {
                if (!this.data) return;
                
                // æ›´æ–°è®¾ç½®è¡¨å•
                document.getElementById('adminPrizeName').value = this.data.prizeName;
                document.getElementById('adminPrizeDescription').value = this.data.prizeDescription;
                document.getElementById('adminWinnerCount').value = this.data.winnerCount;
                document.getElementById('adminTimerHours').value = this.data.timerHours;
                document.getElementById('adminMaxParticipants').value = this.data.maxParticipants;
                
                // æ›´æ–°çŠ¶æ€
                document.getElementById('drawStatus').textContent = this.data.drawStarted ? 'è¿›è¡Œä¸­' : 'æœªå¼€å§‹';
                document.getElementById('adminParticipantCount').textContent = this.data.participants.length;
                document.getElementById('participantsCount').textContent = this.data.participants.length;
                document.getElementById('adminWinnerCountDisplay').textContent = this.data.winnerCount;
                
                // æ›´æ–°å‚ä¸è€…åˆ—è¡¨
                this.updateParticipantsList();
                
                // æ›´æ–°é…ç½®è¡¨å•
                document.getElementById('gistIdInput').value = this.config.gistId || '';
                document.getElementById('githubTokenInput').value = this.config.githubToken || '';
                document.getElementById('syncIntervalInput').value = this.config.syncInterval;
            }
            
            updateParticipantsList() {
                const listElement = document.getElementById('participantsList');
                
                if (this.data.participants.length === 0) {
                    listElement.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #aaa;">
                            <i class="fas fa-users" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
                            <p>æš‚æ— å‚ä¸è€…</p>
                        </div>
                    `;
                    return;
                }
                
                let listHTML = '';
                this.data.participants.forEach((participant, index) => {
                    listHTML += `
                        <div class="participant-item">
                            <div>
                                <div style="font-weight: 600; color: white;">${index + 1}. ${participant.name}</div>
                                <div style="font-size: 0.9rem; color: #aaa;">${participant.time}</div>
                            </div>
                        </div>
                    `;
                });
                listElement.innerHTML = listHTML;
            }
            
            async performDraw() {
                if (this.data.winners && this.data.winners.length > 0) {
                    this.updateWinnersDisplay();
                    return;
                }
                
                if (this.data.participants.length < this.data.winnerCount) {
                    this.showMessage('å‚ä¸è€…ä¸è¶³ï¼Œæ— æ³•å¼€å¥–ï¼', 'error');
                    return;
                }
                
                const available = [...this.data.participants];
                const winners = [];
                
                for (let i = 0; i < this.data.winnerCount; i++) {
                    if (available.length === 0) break;
                    const randomIndex = Math.floor(Math.random() * available.length);
                    winners.push(available[randomIndex]);
                    available.splice(randomIndex, 1);
                }
                
                this.data.winners = winners;
                this.data.drawStarted = false;
                
                const saved = await this.saveData();
                if (saved) {
                    this.showMessage('æŠ½å¥–å®Œæˆï¼å·²äº§ç”Ÿä¸­å¥–è€…', 'success');
                }
            }
            
            // å…¶ä»–æ–¹æ³•ä¿æŒä¸å˜...
            async saveSettings() {
                const prizeName = document.getElementById('adminPrizeName').value.trim();
                const prizeDescription = document.getElementById('adminPrizeDescription').value.trim();
                const winnerCount = parseInt(document.getElementById('adminWinnerCount').value) || 1;
                const timerHours = parseFloat(document.getElementById('adminTimerHours').value) || 1;
                const maxParticipants = parseInt(document.getElementById('adminMaxParticipants').value) || 0;
                
                if (!prizeName) {
                    this.showMessage('è¯·è¾“å…¥å¥–å“åç§°', 'error');
                    return;
                }
                
                this.data.prizeName = prizeName;
                this.data.prizeDescription = prizeDescription;
                this.data.winnerCount = winnerCount;
                this.data.timerHours = timerHours;
                this.data.maxParticipants = maxParticipants;
                
                const saved = await this.saveData();
                if (saved) {
                    this.showMessage('è®¾ç½®å·²ä¿å­˜', 'success');
                    this.updateUI();
                }
            }
            
            async startDraw() {
                if (this.data.drawStarted) {
                    this.showMessage('æŠ½å¥–å·²å¼€å§‹', 'error');
                    return;
                }
                
                if (this.data.participants.length < this.data.winnerCount) {
                    this.showMessage(`å‚ä¸è€…ä¸è¶³ï¼å½“å‰${this.data.participants.length}äººï¼Œéœ€è¦${this.data.winnerCount}äºº`, 'error');
                    return;
                }
                
                this.data.drawStarted = true;
                this.data.drawTime = this.data.timerHours > 0 
                    ? new Date().getTime() + (this.data.timerHours * 60 * 60 * 1000)
                    : null;
                this.data.winners = [];
                this.data.winnersAnnounced = false;
                
                const saved = await this.saveData();
                if (saved) {
                    this.showMessage(`æŠ½å¥–å·²å¼€å§‹ï¼${this.data.timerHours > 0 ? `å°†åœ¨${this.data.timerHours}å°æ—¶åè‡ªåŠ¨å¼€å¥–` : 'è¯·æ‰‹åŠ¨å¼€å¥–'}`, 'success');
                    this.updateUI();
                }
            }
            
            async drawNow() {
                if (!this.data.drawStarted) {
                    this.showMessage('è¯·å…ˆå¼€å§‹æŠ½å¥–', 'error');
                    return;
                }
                
                if (!confirm('ç¡®å®šè¦ç«‹å³å¼€å¥–å—ï¼Ÿ')) return;
                
                await this.performDraw();
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                    this.countdownInterval = null;
                }
            }
            
            async resetDraw() {
                if (!confirm('ç¡®å®šè¦é‡ç½®æŠ½å¥–å—ï¼Ÿ')) return;
                
                this.data.drawStarted = false;
                this.data.drawTime = null;
                this.data.winners = [];
                this.data.winnersAnnounced = false;
                
                const saved = await this.saveData();
                if (saved) {
                    this.showMessage('æŠ½å¥–å·²é‡ç½®', 'success');
                    if (this.countdownInterval) {
                        clearInterval(this.countdownInterval);
                        this.countdownInterval = null;
                    }
                    this.updateUI();
                }
            }
            
            async announceWinners() {
                if (!this.data.winners || this.data.winners.length === 0) {
                    this.showMessage('è¯·å…ˆå¼€å¥–', 'error');
                    return;
                }
                
                this.data.winnersAnnounced = true;
                const saved = await this.saveData();
                if (saved) {
                    this.showMessage('ä¸­å¥–ç»“æœå·²å…¬å¸ƒï¼', 'success');
                    this.updateWinnersDisplay();
                }
            }
            
            async clearParticipants() {
                if (!confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å‚ä¸è€…å—ï¼Ÿ')) return;
                
                this.data.participants = [];
                const saved = await this.saveData();
                if (saved) {
                    this.showMessage('å‚ä¸è€…å·²æ¸…ç©º', 'success');
                    this.updateUI();
                }
            }
            
            exportParticipants() {
                if (this.data.participants.length === 0) {
                    this.showMessage('æ²¡æœ‰å‚ä¸è€…å¯ä»¥å¯¼å‡º', 'error');
                    return;
                }
                
                const text = this.data.participants.map(p => `${p.name} (${p.time})`).join('\n');
                const blob = new Blob([text], {type: 'text/plain'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `å‚ä¸è€…åå•_${new Date().toISOString().slice(0, 10)}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showMessage('å‚ä¸è€…åå•å·²å¯¼å‡º', 'success');
            }
            
            saveCloudConfig() {
                const gistId = document.getElementById('gistIdInput').value.trim();
                const githubToken = document.getElementById('githubTokenInput').value.trim();
                const syncInterval = parseInt(document.getElementById('syncIntervalInput').value) || 10;
                
                if (!gistId || !githubToken) {
                    this.showMessage('è¯·å¡«å†™Gist IDå’ŒGitHub Token', 'error');
                    return;
                }
                
                this.config.gistId = gistId;
                this.config.githubToken = githubToken;
                this.config.syncInterval = syncInterval;
                
                this.saveConfig();
                this.showMessage('é…ç½®å·²ä¿å­˜', 'success');
                this.loadData();
            }
            
            async testConnection() {
                const gistId = document.getElementById('gistIdInput').value.trim();
                const githubToken = document.getElementById('githubTokenInput').value.trim();
                
                if (!gistId || !githubToken) {
                    this.showMessage('è¯·å¡«å†™Gist IDå’ŒGitHub Token', 'error');
                    return;
                }
                
                try {
                    const response = await fetch(`https://api.github.com/gists/${gistId}`, {
                        headers: {
                            'Authorization': `token ${githubToken}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    this.showMessage('è¿æ¥æµ‹è¯•æˆåŠŸï¼', 'success');
                } catch (error) {
                    this.showMessage(`è¿æ¥å¤±è´¥: ${error.message}`, 'error');
                }
            }
            
            updateSyncStatus(message, type = 'info') {
                const textElement = document.getElementById('syncText');
                const loaderElement = document.getElementById('syncLoader');
                
                textElement.textContent = message;
                
                if (type === 'success') {
                    textElement.style.color = 'var(--success)';
                    loaderElement.style.display = 'none';
                } else if (type === 'error') {
                    textElement.style.color = 'var(--accent)';
                    loaderElement.style.display = 'none';
                } else {
                    textElement.style.color = '#aaa';
                    loaderElement.style.display = 'inline-block';
                }
            }
            
            showLoader() {
                document.getElementById('syncLoader').style.display = 'inline-block';
            }
            
            hideLoader() {
                document.getElementById('syncLoader').style.display = 'none';
            }
            
            showMessage(message, type = 'success') {
                const messageDiv = document.createElement('div');
                messageDiv.className = `status-message status-${type}`;
                messageDiv.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i> ${message}`;
                
                document.querySelector('.container').prepend(messageDiv);
                
                setTimeout(() => {
                    if (messageDiv.parentNode) {
                        messageDiv.remove();
                    }
                }, 3000);
            }
        }
        
        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            const lottery = new GameLotteryManager();
            
            // åŠ è½½æ•°æ®
            lottery.loadData();
            
            // å‚ä¸æŒ‰é’®äº‹ä»¶
            document.getElementById('joinBtn').addEventListener('click', async function() {
                const name = document.getElementById('participantName').value.trim();
                const result = await lottery.addParticipant(name);
                
                const statusDiv = document.getElementById('joinStatus');
                if (result.success) {
                    statusDiv.innerHTML = `<div class="status-message status-success">${result.message}</div>`;
                    document.getElementById('participantName').value = '';
                } else {
                    statusDiv.innerHTML = `<div class="status-message status-error">${result.message}</div>`;
                }
                
                setTimeout(() => {
                    statusDiv.innerHTML = '';
                }, 3000);
            });
            
            // å›è½¦å‚ä¸
            document.getElementById('participantName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('joinBtn').click();
                }
            });
            
            // ç®¡ç†å‘˜ç•Œé¢
            const adminOverlay = document.getElementById('adminOverlay');
            const adminBtn = document.getElementById('adminBtn');
            const adminClose = document.getElementById('adminClose');
            
            adminBtn.addEventListener('click', function() {
                const password = prompt('è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ï¼ˆé»˜è®¤ï¼šadmin123ï¼‰');
                if (password === 'admin123') {
                    adminOverlay.style.display = 'block';
                    lottery.updateAdminUI();
                } else {
                    alert('å¯†ç é”™è¯¯ï¼');
                }
            });
            
            adminClose.addEventListener('click', function() {
                adminOverlay.style.display = 'none';
            });
            
            // ç®¡ç†å‘˜æ ‡ç­¾åˆ‡æ¢
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.admin-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(tabId + 'Tab').classList.add('active');
                });
            });
            
            // ç®¡ç†å‘˜åŠŸèƒ½æŒ‰é’®
            document.getElementById('saveSettingsBtn').addEventListener('click', () => lottery.saveSettings());
            document.getElementById('startDrawBtn').addEventListener('click', () => lottery.startDraw());
            document.getElementById('drawNowBtn').addEventListener('click', () => lottery.drawNow());
            document.getElementById('resetDrawBtn').addEventListener('click', () => lottery.resetDraw());
            document.getElementById('announceWinnersBtn').addEventListener('click', () => lottery.announceWinners());
            document.getElementById('clearParticipantsBtn').addEventListener('click', () => lottery.clearParticipants());
            document.getElementById('exportParticipantsBtn').addEventListener('click', () => lottery.exportParticipants());
            document.getElementById('saveConfigBtn').addEventListener('click', () => lottery.saveCloudConfig());
            document.getElementById('testConnectionBtn').addEventListener('click', () => lottery.testConnection());
            
            // æ¯5åˆ†é’Ÿè‡ªåŠ¨åŒæ­¥ä¸€æ¬¡
            setInterval(() => {
                lottery.loadData();
            }, 5 * 60 * 1000);
        });
    </script>
</body>
</html>